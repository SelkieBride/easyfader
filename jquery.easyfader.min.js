/*
* EASYFADER - An Ultralight Fading Slideshow For Responsive Layouts
* Version: 2.0
* License: Creative Commons Attribution 3.0 Unported - CC BY 3.0
* http://creativecommons.org/licenses/by/3.0/
* This software may be used freely on commercial and non-commercial projects with attribution to the author/copyright holder.
* Author: Patrick Kunka
* Copyright 2013 Patrick Kunka, All Rights Reserved
*/

(function(d){d.fn.removeStyle=function(a){return this.each(function(){var b=d(this);a=a.replace(/\s+/g,"");var c=a.split(",");d.each(c,function(){var a=RegExp(this.toString()+"[^;]+;?","g");b.attr("style",function(b,c){if(c)return c.replace(a,"")})});"undefined"!==typeof b.attr("style")&&(c=d.trim(b.attr("style").replace(/\s{2,}/g," ")),b.attr("style",c),""==c&&b.removeAttr("style"))})};EasyFader=function(){this.slideDur=7E3;this.effectDur=800;this.onChangeEnd=this.onChangeStart=null;this.slideSelector=
".slide";this.changing=!1;this.effect="fade";this.pagerListClass="pager-list";this.autoCycle=this.firstLoad=this.fadeOnLoad=!0;this.$pagers=this.$pagerList=this.totalSlides=this.$slides=this.newSlide=this.activeSlide=this.slideTimer=null};EasyFader.prototype={constructor:EasyFader,instances:{},init:function(a,b){b&&d.extend(this,b);this.$container=d(a);this.$slides=this.$container.find(this.slideSelector);this.totalSlides=this.$slides.length;this.$pagerList=this.$container.find("."+this.pagerListClass);
var c;if(d.support.leadingWhitespace)a:{c=this.$container[0];for(var e=["Webkit","Moz","O","ms"],f=0;f<e.length;f++)if(e[f]+"Transition"in c.style){c="-"+e[f].toLowerCase()+"-";break a}c="transition"in c.style?"":!1}else c=!1;this.prefix=c;if(1<this.totalSlides){for(c=0;c<this.totalSlides;c++)this.$pagerList.append('<li class="pager" data-target="'+c+'">'+(c+1)+"</li>");this.bindHandlers()}if("undefined"!==typeof this[this.effect+"Init"])this[this.effect+"Init"]();"undefined"===typeof this.activeSlide&&
(this.activeSlide=0);this.$pagers=this.$pagerList.find(".pager");this.$pagers.eq(this.activeSlide).addClass("active");this.fadeOnLoad?this.fadeSlides(this.activeSlide+1,0):this.autoCycle&&1<this.totalSlides&&this.waitForNext()},bindHandlers:function(){var a=this;a.$container.find(".pager").on("click",function(){var b=d(this).attr("data-target");clearTimeout(a.slideTimer);a.changeSlides(b)});d(window).on("keydown",function(b){b=b.keyCode;if(39==b||37==b)b=39==b?"next":"prev",clearTimeout(a.slideTimer),
a.changeSlides(b)})},cleanUp:function(a,b){if(this.firstLoad&&this.fadeOnLoad)this.fadeCleanUp(a,b);else this[this.effect+"CleanUp"](a,b);this.activeSlide=b;this.changing=!1;"function"==typeof this.onChangeEnd&&this.onChangeEnd.call(this,this.$slides.eq(this.activeSlide));this.firstLoad=!1;this.autoCycle&&this.waitForNext()},fadeCleanUp:function(a,b){this.$slides.eq(a).removeStyle("opacity, z-index");this.$slides.eq(b).removeStyle(this.prefix+"transition, transition")},animateSlides:function(a,b){if(this.changing||
a==b)return!1;this.changing=!0;this.$pagers.removeClass("active").eq(this.newSlide).addClass("active");"function"!=typeof this.onChangeStart||this.firstLoad||this.onChangeStart.call(this,this.$slides.eq(this.newSlide));this[this.effect+"Slides"](a,b)},fadeSlides:function(a,b){var c=this;c.$slides.eq(a).css("z-index",2);c.$slides.eq(b).css("z-index",3);if(c.prefix){var e={};e[c.prefix+"transition"]="opacity "+c.effectDur+"ms";e.opacity=1;c.$slides.eq(b).css(e);setTimeout(function(){c.cleanUp(a,b)},
c.effectDur)}else c.$slides.eq(b).animate({opacity:1},c.effectDur,function(){c.cleanUp(a,b)})},changeSlides:function(a){"next"==a?(this.newSlide=this.activeSlide+1,this.newSlide>this.totalSlides-1&&(this.newSlide=0)):"prev"==a?(this.newSlide=this.activeSlide-1,0>this.newSlide&&(this.newSlide=this.totalSlides-1)):this.newSlide=a;this.animateSlides(this.activeSlide,this.newSlide)},waitForNext:function(){var a=this;a.slideTimer=setTimeout(function(){a.changeSlides("next")},a.slideDur)},getPrefixedCSS:function(a,
b,c){var e={};for(i=0;2>i;i++){var d=0==i?this.prefix:"";c?e[d+a]=d+b:e[d+a]=b}return e},pause:function(){clearTimeout(this.slideTimer);this.autoCycle=!1},resume:function(){this.autoCycle=this;this.waitForNext()}};d.fn.easyFader=function(){var a=arguments;return this.each(function(){if(a&&"string"===typeof a[0])EasyFader.prototype.instances[this.id][a[0]](a[1]);else{var b=a[0],c=new EasyFader;c.init(this,b);c.instances[this.id]=c}})}})(jQuery);