/*
* EASYFADER - An Ultralight Fading Slideshow For Responsive Layouts
* Version: 2.0.3
* License: Creative Commons Attribution 3.0 Unported - CC BY 3.0
* http://creativecommons.org/licenses/by/3.0/
* This software may be used freely on commercial and non-commercial projects with attribution to the author/copyright holder.
* Author: Patrick Kunka
* Copyright 2013 Patrick Kunka, All Rights Reserved
*/

(function(d){d.fn.removeStyle=function(a){return this.each(function(){var b=d(this);a=a.replace(/\s+/g,"");var c=a.split(",");d.each(c,function(){var a=RegExp(this.toString()+"[^;]+;?","g");b.attr("style",function(b,c){if(c)return c.replace(a,"")})});"undefined"!==typeof b.attr("style")&&(c=d.trim(b.attr("style").replace(/\s{2,}/g," ")),b.attr("style",c),""==c&&b.removeAttr("style"))})};EasyFader=function(){this.slideDur=7E3;this.effectDur=800;this.onChangeEnd=this.onChangeStart=null;this.slideSelector=
".slide";this.changing=!1;this.effect="fade";this.pagerListClass="pager-list";this.autoCycle=this.firstLoad=this.fadeOnLoad=!0;this.$pagers=this.$pagerList=this.totalSlides=this.$slides=this.newSlide=this.activeIndex=this.slideTimer=null};EasyFader.prototype={constructor:EasyFader,instances:{},init:function(a,b){b&&d.extend(this,b);this.$container=d(a);this.$slides=this.$container.find(this.slideSelector);this.totalSlides=this.$slides.length;this.$pagerList=this.$container.find("."+this.pagerListClass);
var c;if(d.support.leadingWhitespace)a:{c=this.$container[0];for(var e=["Webkit","Moz","O","ms"],f=0;f<e.length;f++)if(e[f]+"Transition"in c.style){c="-"+e[f].toLowerCase()+"-";break a}c="transition"in c.style?"":!1}else c=!1;this.prefix=c;if(1<this.totalSlides){for(c=0;c<this.totalSlides;c++)this.$pagerList.append('<li class="pager" data-target="'+c+'">'+(c+1)+"</li>");this.bindHandlers()}if("undefined"!==typeof this[this.effect+"Init"])this[this.effect+"Init"]();this.activeIndex||(this.activeIndex=
0);this.updateInfo();this.$pagers=this.$pagerList.find(".pager");this.$pagers.eq(this.activeIndex).addClass("active");this.fadeOnLoad?this.fadeSlides(this.activeIndex+1,0):this.autoCycle&&1<this.totalSlides&&this.waitForNext()},updateInfo:function(){this.info={$container:this.$container,effect:this.effect,activeIndex:this.activeIndex,$activeSlide:this.$slides.eq(this.activeIndex),totalSlides:this.$slides.length}},bindHandlers:function(){var a=this;a.$container.find(".pager").on("click",function(){var b=
d(this).attr("data-target");clearTimeout(a.slideTimer);a._changeSlides(b)});d(window).on("keydown",function(b){b=b.keyCode;if(39==b||37==b)b=39==b?"next":"prev",clearTimeout(a.slideTimer),a._changeSlides(b)})},cleanUp:function(a,b){if(this.firstLoad&&this.fadeOnLoad)this.fadeCleanUp(a,b);else this[this.effect+"CleanUp"](a,b);this.activeIndex=b;this.changing=!1;this.updateInfo();"function"==typeof this.callback&&(this.callback.call(this,this.info),delete this.callback);"function"==typeof this.onChangeEnd&&
this.onChangeEnd.call(this,this.info);this.firstLoad=!1;this.autoCycle&&this.waitForNext()},fadeCleanUp:function(a,b){this.$slides.eq(a).removeStyle("opacity, z-index");this.$slides.eq(b).removeStyle(this.prefix+"transition, transition")},animateSlides:function(a,b){if(this.changing||a==b)return!1;this.changing=!0;this.$pagers.removeClass("active").eq(this.newSlide).addClass("active");"function"!=typeof this.onChangeStart||this.firstLoad||this.onChangeStart.call(this,this.info);this[this.effect+"Slides"](a,
b)},fadeSlides:function(a,b){var c=this;c.$slides.eq(a).css("z-index",2);c.$slides.eq(b).css("z-index",3);if(c.prefix){var e={};e[c.prefix+"transition"]="opacity "+c.effectDur+"ms";e.opacity=1;c.$slides.eq(b).css(e);setTimeout(function(){c.cleanUp(a,b)},c.effectDur)}else c.$slides.eq(b).animate({opacity:1},c.effectDur,function(){c.cleanUp(a,b)})},_changeSlides:function(a){"next"==a?(this.newSlide=1*this.activeIndex+1,this.newSlide>this.totalSlides-1&&(this.newSlide=0)):"prev"==a?(this.newSlide=1*
this.activeIndex-1,0>this.newSlide&&(this.newSlide=this.totalSlides-1)):this.newSlide=a;this.animateSlides(this.activeIndex,this.newSlide)},waitForNext:function(){var a=this;a.slideTimer=setTimeout(function(){a._changeSlides("next")},a.slideDur)},getPrefixedCSS:function(a,b,c){var e={};for(i=0;2>i;i++){var d=0==i?this.prefix:"";c?e[d+a]=d+b:e[d+a]=b}return e},pause:function(){clearTimeout(this.slideTimer);this.autoCycle=!1},play:function(a){this.autoCycle=!0;a?this.waitForNext():this._changeSlides("next")},
changeSlides:function(a,b){this.callback=b;a=a?a:"next";clearTimeout(this.slideTimer);this._changeSlides(a)},getOption:function(a){return this[a]},setOptions:function(a){d.extend(this,a)}};d.fn.easyFader=function(){var a=arguments,b=[],c;c=this.each(function(){if(a&&"string"===typeof a[0]){var c=EasyFader.prototype.instances[this.id][a[0]](a[1],a[2]);c&&b.push(c)}else this.id=this.id?this.id:"EasyFader"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase(),c=new EasyFader,c.instances[this.id]||
(c.instances[this.id]=c,c.init(this,a[0]))});return b.length?1<b.length?b:b[0]:c}})(jQuery);